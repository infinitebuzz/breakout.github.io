<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
		"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:x2="http://www.w3.org/TR/xhtml2" xmlns:role=
"http://www.w3.org/2005/01/wai-rdf/GUIRoleTaxonomy#" xmlns:state="http://www.w3.org/2005/07/aaa">
<!-- this validate fails in the javascript -->
<head>
  <title>Breakout!</title>
</head>
<body>
  <canvas id="canvas" width="700" height="700"></canvas><br />
  <span id="instruct">Keys:  as </span> Score: <span id="stats">0</span>
  <script type="text/javascript">
 	var vendors = ['webkit', 'moz'];
	var canvas = document.getElementById("canvas");
	var divStats = document.getElementById("stats");
	for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
		window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
		window.cancelAnimationFrame =
		  window[vendors[x]+'CancelAnimationFrame'] || window[vendors[x]+'CancelRequestAnimationFrame'];
	}
	var cw = canvas.width,
		ch = canvas.height,
		cx = null,
		fps = 30,
		fElapsedTime =    1000/fps,
		lastTime     =    (new Date()).getTime(),
		currentTime  =    0,
		delta = 0;
	var level = "";
	level += "################";
	level += "#..............#";
	level += "#...11111111...#";
	level += "#..............#";
	level += "#..............#";
	level += "#..............#";
	level += "#..............#";
	level += "#..............#";
	level += "#..............#";
	level += "#..............#";
	level += "#..............#";
	level += "#..............#";
	level += "#..............#";
	level += "#..............#";
	level += "#..............#";
	var nWidth = 16, nHeight = 15;
	var nBlockSize = 8;
	  
	function gameLoop() {
		window.requestAnimationFrame(gameLoop);
		currentTime = (new Date()).getTime();
		delta = (currentTime-lastTime);
		//if(delta > fElapsedTime) 
		{
			cx.clearRect(0,0,cw,cw);
			// Draw the level
			for(var y = 0; y < nHeight; y++) {
				for(var x = 0; x < nWidth; x++) {
					switch(level.charAt(y*nWidth+x)) {
					case '#':
						cx.fillStyle = '#FFFFFF';
						cx.fillRect(x * nBlockSize, y * nBlockSize, nBlockSize, nBlockSize);						
						break;		
					case '.':
						cx.fillStyle = '#000000';
						cx.fillRect(x * nBlockSize, y * nBlockSize, nBlockSize, nBlockSize);						
						break;		
					case '1':
						cx.fillStyle = '#00FF0';
						cx.fillRect(x * nBlockSize, y * nBlockSize, nBlockSize, nBlockSize);						
						break;		
					}
				}
			}

   	 	}
  	}
  document.addEventListener("keypress", function(event) {
    switch(event.keyCode) {
      case 122:  //z
      break;
      case 120://x
      break; 
    }
  });
	if (typeof (canvas.getContext) !== undefined) {
		cx = canvas.getContext('2d');
		gameLoop();
	}
  </script>
</body>
